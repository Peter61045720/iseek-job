<div *ngIf="isLoading" class="loading-container">
  <p>Bet√∂lt√©s...</p>
</div>

<div *ngIf="!isLoading && (!contact || !contact.companyId)" class="warning-container">
  <p class="warning-text">Nincs hozz√°rendelve c√©g azonos√≠t√≥ a profilodhoz. Az √°ll√°shirdet√©sek nem el√©rhet≈ëk.</p>
</div>

<div *ngIf="!isLoading && jobs.length === 0 && contact?.companyId">
  <p>Nincsenek √°ll√°shirdet√©sek a c√©ghez.</p>
</div>

<div *ngIf="!isLoading && jobs.length > 0">
  <h2>√Åll√°shirdet√©sek</h2>

  <div class="add-job-icon">
    <button mat-icon-button (click)="toggleAddJobForm()">
      <mat-icon>{{ showAddJobForm ? 'close' : 'add_circle' }}</mat-icon>
    </button>
  </div>

  <!-- Job hozz√°ad√°sa form -->
  <div *ngIf="showAddJobForm" class="job-form-container">
    <form [formGroup]="jobForm" (ngSubmit)="createJob()">
      <div class="form-fields-grid">
        <mat-form-field appearance="fill">
          <mat-label>Poz√≠ci√≥</mat-label>
          <input matInput formControlName="position" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Helysz√≠n</mat-label>
          <input matInput formControlName="work_location" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Munkat√≠pus</mat-label>
          <input matInput formControlName="type" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Pr√≥baid≈ë</mat-label>
          <input matInput formControlName="testing_time" />
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>√Ållapot</mat-label>
          <mat-select formControlName="status">
            <mat-option value="ACTIVE">Akt√≠v</mat-option>
            <mat-option value="INACTIVE">Inakt√≠v</mat-option>
            <mat-option value="CLOSED">Lez√°rt</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Oktat√°s</mat-label>
          <input matInput formControlName="education" />
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width">
          <mat-label>Le√≠r√°s</mat-label>
          <textarea matInput formControlName="description" class="description-textarea"></textarea>
        </mat-form-field>
      </div>

      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="!jobForm.valid">Ment√©s</button>
      </div>
    </form>
  </div>

  <!-- √Åll√°shirdet√©sek list√°ja -->
  <ul class="job-list">
    <li *ngFor="let job of jobs" class="job-item">
      <div class="job-details">
        <h3>{{ job.position }}</h3>
        <p><strong>Munkav√©gz√©s helye:</strong> {{ job.work_location }}</p>
        <p><strong>Munkat√≠pus:</strong> {{ job.type }}</p>
        <p><strong>Pr√≥baid≈ë:</strong> {{ job.testing_time }}</p>
        <p><strong>√Ållapot:</strong> {{ job.status }}</p>
        <p><strong>Felt√∂ltve:</strong> {{ job.date.toDate() | date: 'mediumDate' }}</p>
        <p><strong>Oktat√°s:</strong> {{ job.education }}</p>
        <p><strong>Le√≠r√°s:</strong> {{ job.description }}</p>
      </div>
      <button (click)="deleteJob(job.id)" class="delete-button">üóëÔ∏è T√∂rl√©s</button>
    </li>
  </ul>
</div>
